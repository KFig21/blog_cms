(this.webpackJsonpblog_cms=this.webpackJsonpblog_cms||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(18),a=n.n(s),r=n(11),o=(n(26),n(5)),i=n(4),l=(n(27),n(28),n(29),n(0));function u(){return Object(l.jsx)("svg",{className:"navbar-svg",version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"655.000000pt",height:"657.000000pt",viewBox:"0 0 655.000000 657.000000",preserveAspectRatio:"xMidYMid meet",children:Object(l.jsx)("g",{transform:"translate(0.000000,657.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",className:"navbar-svg-g",children:Object(l.jsx)("path",{d:"M1 4978 c1 -995 5 -1546 10 -1468 22 311 102 661 224 970 46 118 204\r\n440 216 440 5 0 9 4 9 9 0 16 120 213 144 236 6 6 29 37 51 70 22 33 47 66 55\r\n75 8 8 44 50 79 93 35 43 72 84 82 90 11 7 19 16 19 22 0 14 133 145 147 145\r\n6 0 13 6 16 14 5 12 128 119 224 194 l43 34 0 -2606 c0 -1433 -4 -2606 -8\r\n-2606 -5 0 -31 19 -59 43 -28 23 -85 70 -127 105 -42 34 -76 67 -76 72 0 6 -6\r\n10 -13 10 -14 0 -147 130 -147 144 0 5 -18 25 -40 44 -23 19 -39 37 -36 40 3\r\n2 -6 13 -19 24 -14 11 -23 24 -20 29 4 5 2 9 -3 9 -12 0 -112 121 -111 134 0\r\n5 -5 12 -11 16 -6 4 -19 18 -28 32 -9 14 -40 59 -68 100 -28 41 -62 95 -75\r\n119 -13 24 -27 46 -31 49 -15 11 -169 332 -211 440 -123 313 -205 668 -226\r\n975 -5 81 -9 -468 -10 -1472 l-1 -1603 3275 0 3275 0 0 3285 0 3285 -3275 0\r\n-3275 0 1 -1592z m3474 1562 c150 -11 292 -32 455 -67 138 -29 360 -93 360\r\n-103 0 -4 -488 -495 -1085 -1092 l-1085 -1085 0 1073 0 1072 108 36 c437 143\r\n834 196 1247 166z m1623 -567 c92 -58 360 -276 369 -299 3 -8 10 -14 16 -14\r\n14 0 147 -131 147 -145 0 -6 8 -15 19 -22 10 -6 47 -47 82 -90 35 -43 71 -85\r\n79 -93 8 -9 33 -42 55 -75 22 -32 48 -67 58 -77 9 -10 17 -24 17 -31 0 -12\r\n-2639 -2658 -2657 -2664 -4 -2 -204 193 -443 432 l-435 435 1330 1330 c731\r\n732 1331 1330 1333 1330 1 0 15 -8 30 -17z m1250 -1660 c6 -21 24 -85 41 -143\r\n38 -129 55 -204 86 -385 92 -546 26 -1130 -192 -1685 -42 -108 -196 -429 -211\r\n-440 -4 -3 -18 -25 -31 -49 -13 -24 -47 -78 -75 -119 -28 -41 -59 -86 -68\r\n-100 -9 -14 -22 -28 -28 -32 -6 -4 -10 -10 -8 -13 5 -8 -102 -137 -114 -137\r\n-5 0 -7 -4 -3 -9 3 -5 -6 -18 -20 -29 -13 -11 -22 -22 -19 -24 3 -3 -13 -21\r\n-36 -40 -22 -19 -40 -39 -40 -44 0 -12 -132 -144 -145 -144 -6 0 -15 -8 -22\r\n-18 -14 -23 -178 -158 -278 -228 l-72 -52 -629 629 -629 629 1235 1235 c679\r\n679 1238 1235 1241 1235 4 0 11 -17 17 -37z m-2003 -4085 c-23 -13 -263 -85\r\n-360 -108 -245 -58 -469 -84 -725 -84 -379 0 -658 50 -1107 197 l-33 10 0\r\n1116 0 1116 1120 -1120 c820 -820 1116 -1122 1105 -1127z"})})})}function j(e){var t=e.userAuth,n=e.setUserAuth;return Object(l.jsx)("div",{className:"navbar",children:Object(l.jsxs)("div",{className:"navbar-container",children:[Object(l.jsxs)("div",{className:"nav-header-container",children:[Object(l.jsx)(u,{}),Object(l.jsx)("span",{className:"nav-title",children:"KFig21 Blog CMS"})]}),Object(l.jsxs)("div",{className:"nav-link-container",children:[Object(l.jsx)(r.b,{to:"./posts",children:Object(l.jsx)("button",{children:"Home"})}),Object(l.jsx)(r.b,{to:"./newpost",children:Object(l.jsx)("button",{children:"New Post"})}),t&&Object(l.jsx)("button",{className:"logout-button",onClick:function(){n(!1),localStorage.clear()},children:"Logout"})]})]})})}var b=n(7),d=n(3),m=n.n(d),p=n(6),h=n(14);n(32);function x(e){var t=e.setUserAuth,n=Object(h.a)(),s=n.register,a=n.handleSubmit,r=n.errors,i=Object(c.useState)(!1),u=Object(o.a)(i,2),j=u[0],d=u[1],x=function(){var e=Object(p.a)(m.a.mark((function e(n){var c,s,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.stringify(n),e.prev=1,e.next=4,fetch("https://still-atoll-78147.herokuapp.com/api/login",{method:"POST",body:c,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:if(a=e.sent,200===s.status){e.next=11;break}return d(!0),e.abrupt("return");case 11:localStorage.setItem("token",a.token),localStorage.setItem("userAuth",!0),t(!0),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),d(!0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{className:"login-container",children:Object(l.jsxs)("form",{className:"login-form",children:[Object(l.jsx)("h1",{children:"Admin Login"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",Object(b.a)({className:"form-input",autoComplete:"username",type:"text",placeholder:"Username"},s("username",{required:!0}))),r&&Object(l.jsx)("span",{className:"error-span",children:r.username.message})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",Object(b.a)({className:"form-input",autoComplete:"current-password",placeholder:"Password",type:"password"},s("password",{required:!0}))),r&&Object(l.jsxs)("span",{className:"error-span",children:[r.password.message," "]})]}),j&&Object(l.jsx)("span",{className:"error-span",children:"Username or password incorrect"}),Object(l.jsx)("button",{type:"submit",onClick:a(x),children:"Login"})]})})}n(33);var O=n(19),f=n.n(O);function v(){return Object(l.jsx)("div",{class:"loader",children:Object(l.jsx)(f.a,{type:"bars",color:"white"})})}n(34);function N(e){var t=e.comment,n=e.handleDeleteComment;return Object(l.jsxs)("div",{className:"comment-container",children:[Object(l.jsx)("span",{className:"comment-name",children:t.user}),Object(l.jsx)("span",{className:"comment-text",children:t.text}),Object(l.jsxs)("span",{className:"comment-date",children:["Submitted: ",t.submitted]}),Object(l.jsx)("button",{className:"comment-delete-button",onClick:function(){return n(t)},children:"Delete"})]},t._id)}n(35);function g(e){var t=e.comment,n=e.handleCancelComment,c=e.deleteComment;return Object(l.jsx)("div",{className:"shade",children:Object(l.jsxs)("div",{className:"delete-modal-container",children:[Object(l.jsx)("h2",{className:"delete-modal-header",children:"Are you sure you want to delete this comment"}),Object(l.jsx)("span",{className:"comment-name",children:t.user}),Object(l.jsx)("span",{className:"comment-text",children:t.text}),Object(l.jsxs)("span",{className:"comment-date",children:["Submitted: ",t.submitted]}),Object(l.jsxs)("div",{className:"buttons-container",children:[Object(l.jsx)("button",{className:"delete-button",onClick:function(){return c(t._id)},children:"Delete"}),Object(l.jsx)("button",{className:"cancel-button",onClick:function(){return n()},children:"Cancel"})]})]})})}n(36);function k(e){var t=e.post,n=e.handleCancelPost,c=e.deletePost;return Object(l.jsx)("div",{className:"shade",children:Object(l.jsxs)("div",{className:"delete-modal-container",children:[Object(l.jsx)("h2",{className:"delete-modal-header",children:"Are you sure you want to delete this Post"}),Object(l.jsx)("span",{className:"post-title",children:t.title}),Object(l.jsx)("span",{className:"post-author",children:t.author}),Object(l.jsxs)("span",{className:"post-date",children:["Submitted: ",t.submitted]}),Object(l.jsxs)("div",{className:"buttons-container",children:[Object(l.jsx)("button",{className:"delete-button",onClick:function(){return c()},children:"Delete"}),Object(l.jsx)("button",{className:"cancel-button",onClick:function(){return n()},children:"Cancel"})]})]})})}function y(){var e=Object(c.useState)(),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(),r=Object(o.a)(a,2),u=r[0],j=r[1],d=Object(c.useState)(!1),x=Object(o.a)(d,2),O=x[0],f=x[1],y=Object(c.useState)(!1),w=Object(o.a)(y,2),C=w[0],S=w[1],A=Object(c.useState)(!1),q=Object(o.a)(A,2),U=q[0],B=q[1],z=Object(c.useState)(null),P=Object(o.a)(z,2),T=P[0],F=P[1],I=Object(h.a)(),D=I.register,_=I.handleSubmit,E=I.errors,J=Object(i.g)(),R=Object(i.h)().id;Object(c.useEffect)((function(){var e=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://still-atoll-78147.herokuapp.com/api/posts/".concat(R));case 3:if(200===(t=e.sent).status){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t.json();case 8:n=e.sent,s(n.post),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e();var t=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://still-atoll-78147.herokuapp.com/api/posts/".concat(R,"/comments"));case 3:if(200===(t=e.sent).status){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t.json();case 8:n=e.sent,j(n.comments),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();t(),f(!1)}),[]);var M=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),c="Bearer ".concat(n),s=JSON.stringify(t),e.prev=3,e.next=6,fetch("https://still-atoll-78147.herokuapp.com/api/posts/".concat(R),{method:"PUT",body:s,headers:{Authorization:c,"Content-Type":"application/json"}});case 6:if(200===e.sent.status){e.next=9;break}return e.abrupt("return");case 9:f(!0),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),n="Bearer ".concat(t),e.prev=2,e.next=5,fetch("https://still-atoll-78147.herokuapp.com/api/posts/".concat(R),{method:"delete",headers:{Authorization:n,"Content-Type":"application/json"}});case 5:if(200===e.sent.status){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Y();case 10:J("/posts"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),c="Bearer ".concat(n),e.prev=2,e.next=5,fetch("https://still-atoll-78147.herokuapp.com/api/posts/".concat(R,"/comments/").concat(t),{method:"delete",headers:{Authorization:c,"Content-Type":"application/json"}});case 5:if(200===e.sent.status){e.next=8;break}return e.abrupt("return");case 8:s=u.filter((function(e){return e._id!==t})),j(s),B(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),H=function(e){B(!0),F(e)},K=function(){B(!1)},Y=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),n="Bearer ".concat(t),e.prev=2,e.next=5,fetch("https://still-atoll-78147.herokuapp.com/api/posts/".concat(R,"/comments"),{method:"delete",headers:{Authorization:n,"Content-Type":"application/json"}});case 5:if(200===e.sent.status){e.next=8;break}return e.abrupt("return");case 8:j(),B(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"layout",children:[n?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"edit-container",children:Object(l.jsxs)("div",{className:"edit-form",children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"title",children:"Title:"}),Object(l.jsx)("input",Object(b.a)(Object(b.a)({className:"edit-form-input title"},D("title",{required:!0})),{},{defaultValue:n.title})),E&&Object(l.jsx)("span",{children:"Required field"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"description",children:"Description:"}),Object(l.jsx)("textarea",Object(b.a)(Object(b.a)({type:"text",className:"edit-form-input description"},D("description",{required:!0})),{},{defaultValue:n.description})),E&&Object(l.jsx)("span",{children:"Required field"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"text",children:"Body:"}),Object(l.jsx)("textarea",Object(b.a)(Object(b.a)({type:"text",className:"edit-form-input body"},D("text",{required:!0})),{},{defaultValue:n.text})),E&&Object(l.jsx)("span",{children:"Required field"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"author",children:"Author:"}),Object(l.jsx)("input",Object(b.a)(Object(b.a)({className:"edit-form-input author"},D("author",{required:!0})),{},{defaultValue:n.author})),E&&Object(l.jsx)("span",{children:"Required field"})]}),O&&Object(l.jsx)("span",{children:"Updated successfully!"}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"update-button",type:"submit",onClick:_(M),children:"Update"})}),Object(l.jsx)("button",{className:"delete-button",onClick:function(){S(!0)},children:"Delete"})]})}),u?Object(l.jsxs)("div",{className:"comments-container",children:[Object(l.jsxs)("span",{className:"comments-header",children:["Comments (",u.length,")"]}),u.map((function(e){return Object(l.jsx)(N,{comment:e,handleCancelComment:K,handleDeleteComment:H})}))]}):Object(l.jsx)("div",{className:"comments-container",children:Object(l.jsx)("span",{className:"comments-header",children:"Comments (0)"})})]}):Object(l.jsx)(v,{}),U&&Object(l.jsx)(g,{comment:T,handleCancelComment:K,deleteComment:L}),C&&Object(l.jsx)(k,{post:n,handleCancelPost:function(){S(!1)},deletePost:V})]})}n(37);function w(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(h.a)(),r=a.register,u=a.handleSubmit,j=Object(i.g)(),d=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),c="Bearer ".concat(n),a=JSON.stringify(t),e.prev=3,e.next=6,fetch("https://still-atoll-78147.herokuapp.com/api/posts/",{method:"post",body:a,headers:{Authorization:c,"Content-Type":"application/json"}});case 6:if(200===e.sent.status){e.next=9;break}return e.abrupt("return");case 9:j("/posts"),s(!0),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(3);case 15:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{className:"layout",children:Object(l.jsx)("div",{className:"new-container",children:Object(l.jsxs)("div",{className:"new-form",children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"title",children:"Title:"}),Object(l.jsx)("input",Object(b.a)({type:"text",className:"edit-form-input title"},r("title",{required:!0})))]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"description",children:"Description:"}),Object(l.jsx)("textarea",Object(b.a)({className:"edit-form-input description"},r("description",{required:!0})))]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"text",children:"Body:"}),Object(l.jsx)("textarea",Object(b.a)({className:"edit-form-input body"},r("text",{required:!0})))]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{className:"form-label",children:"Author:"}),Object(l.jsx)("input",Object(b.a)({className:"edit-form-input author"},r("author",{required:!0})))]}),Object(l.jsx)("button",{type:"submit",onClick:u(d),children:"Submit"}),n&&Object(l.jsx)("span",{children:"Submited successfully!"})]})})})}n(38);var C=n(58);function S(e){var t=e.post,n=t.comments.length;return Object(l.jsxs)("div",{className:"post-container",children:[Object(l.jsx)("span",{className:"post-container-title",children:t.title}),Object(l.jsx)("span",{className:"post-container-description",children:t.description}),Object(l.jsxs)("span",{className:"post-container-author",children:["By: ",t.author," "]}),Object(l.jsxs)("span",{className:"post-container-submitted",children:[t.submitted," "]}),Object(l.jsxs)("div",{className:"edit-post-container",children:[Object(l.jsx)(r.b,{to:"/posts/".concat(t._id),children:Object(l.jsx)("button",{children:"Edit Post"})}),Object(l.jsxs)("div",{style:{color:n>0?"rgb(100, 100, 100)":"rgb(195, 195, 195)"},className:"comment-count-container",children:[Object(l.jsx)("div",{className:"comment-icon-container",children:Object(l.jsx)(C.a,{})}),Object(l.jsx)("span",{className:"comment-count",children:n})]})]})]})}n(43);function A(){var e=Object(c.useState)(),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://still-atoll-78147.herokuapp.com/api/posts");case 3:return(t=e.sent).status,e.next=7,t.json();case 7:n=e.sent,s(n.posts),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(l.jsx)("div",{className:"posts-holder",children:n?Object(l.jsx)("div",{className:"posts-container",children:n&&n.map((function(e){return Object(l.jsx)(S,{post:e},e._id)}))}):Object(l.jsx)(v,{})})}var q=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("userAuth");s(!!e)}),[]),Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(j,{userAuth:n,setUserAuth:s}),Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)(i.d,{children:[Object(l.jsx)(i.b,{exact:!0,path:"/",element:n?Object(l.jsx)(A,{}):Object(l.jsx)(x,{setUserAuth:s}),children:Object(l.jsx)(i.a,{to:"/posts"})}),Object(l.jsx)(i.b,{exact:!0,path:"/posts",element:n?Object(l.jsx)(A,{}):Object(l.jsx)(x,{setUserAuth:s})}),Object(l.jsx)(i.b,{exact:!0,path:"/posts/:id",element:n?Object(l.jsx)(y,{}):Object(l.jsx)(x,{setUserAuth:s})}),Object(l.jsx)(i.b,{path:"/newpost",element:n?Object(l.jsx)(w,{}):Object(l.jsx)(x,{setUserAuth:s})}),Object(l.jsx)(i.b,{path:"/",children:Object(l.jsx)("p",{children:"404"})})]})})]})};a.a.render(Object(l.jsx)(r.a,{basename:"/",children:Object(l.jsx)(q,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.de2b6b98.chunk.js.map